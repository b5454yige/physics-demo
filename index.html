<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨é‡ä¸èƒ½é‡å®ˆæ’åŸç†æ¼”ç¤º - åœ¨çº¿å®éªŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .online-notice {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }
        
        .online-notice h3 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .simulation-area {
            flex: 1;
            min-width: 500px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
        }
        
        .canvas-container {
            width: 100%;
            height: 350px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        
        .control-group h3 {
            margin-bottom: 10px;
            color: #ffcc00;
        }
        
        .slider-container {
            margin-bottom: 10px;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 5px;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
        }
        
        .value-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            width: calc(100% - 10px);
        }
        
        button:hover {
            background: #3a7bc8;
        }
        
        .theory-area {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
        }
        
        .theory-section {
            margin-bottom: 25px;
        }
        
        .theory-section h2 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .data-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .data-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .data-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ffcc00;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .simulation-area, .theory-area {
                min-width: 100%;
            }
            
            .data-display {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>åŠ¨é‡ä¸èƒ½é‡å®ˆæ’åŸç†æ¼”ç¤º</h1>
            <p>å°çƒç¢°æ’å®éªŒ - åœ¨çº¿äº¤äº’å¼ç‰©ç†æ•™å­¦</p>
        </header>
        
        <div class="online-notice">
            <h3>ğŸŒ åœ¨çº¿å®éªŒå¹³å°</h3>
            <p>æ­¤é¡µé¢ä¸ºåœ¨çº¿äº¤äº’å¼å®éªŒï¼Œæ”¯æŒç”µè„‘å’Œæ‰‹æœºè®¿é—®ã€‚è°ƒæ•´å‚æ•°è§‚å¯Ÿç‰©ç†è§„å¾‹ï¼</p>
        </div>
        
        <div class="content">
            <div class="simulation-area">
                <div class="canvas-container">
                    <canvas id="simulationCanvas"></canvas>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h3>ğŸ”µ å°çƒ1å‚æ•°</h3>
                        <div class="slider-container">
                            <label for="mass1">è´¨é‡ (kg)</label>
                            <input type="range" id="mass1" min="1" max="10" value="2">
                            <div class="value-display">
                                <span>1</span>
                                <span id="mass1Value">2 kg</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <label for="velocity1">é€Ÿåº¦ (m/s)</label>
                            <input type="range" id="velocity1" min="0" max="10" value="5">
                            <div class="value-display">
                                <span>0</span>
                                <span id="velocity1Value">5 m/s</span>
                                <span>10</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h3>ğŸ”´ å°çƒ2å‚æ•°</h3>
                        <div class="slider-container">
                            <label for="mass2">è´¨é‡ (kg)</label>
                            <input type="range" id="mass2" min="1" max="10" value="4">
                            <div class="value-display">
                                <span>1</span>
                                <span id="mass2Value">4 kg</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <label for="velocity2">é€Ÿåº¦ (m/s)</label>
                            <input type="range" id="velocity2" min="-10" max="0" value="-3">
                            <div class="value-display">
                                <span>-10</span>
                                <span id="velocity2Value">-3 m/s</span>
                                <span>0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h3>ğŸ¯ ç¢°æ’æ§åˆ¶</h3>
                        <button id="elasticBtn" class="active">å¼¹æ€§ç¢°æ’</button>
                        <button id="inelasticBtn">éå¼¹æ€§ç¢°æ’</button>
                        <button id="resetBtn">é‡ç½®å®éªŒ</button>
                    </div>
                </div>
                
                <div class="data-display">
                    <div class="data-box">
                        <h3>æ€»åŠ¨é‡</h3>
                        <div class="data-value" id="totalMomentum">0 kgÂ·m/s</div>
                    </div>
                    <div class="data-box">
                        <h3>æ€»åŠ¨èƒ½</h3>
                        <div class="data-value" id="totalEnergy">0 J</div>
                    </div>
                    <div class="data-box">
                        <h3>å°çƒ1é€Ÿåº¦</h3>
                        <div class="data-value" id="ball1Velocity">0 m/s</div>
                    </div>
                    <div class="data-box">
                        <h3>å°çƒ2é€Ÿåº¦</h3>
                        <div class="data-value" id="ball2Velocity">0 m/s</div>
                    </div>
                </div>
            </div>
            
            <div class="theory-area">
                <div class="theory-section">
                    <h2>ğŸ“š åŠ¨é‡å®ˆæ’å®šå¾‹</h2>
                    <p>åœ¨ä¸€ä¸ªå°é—­ç³»ç»Ÿä¸­ï¼Œå¦‚æœæ²¡æœ‰å¤–åŠ›ä½œç”¨ï¼Œç³»ç»Ÿçš„æ€»åŠ¨é‡ä¿æŒä¸å˜ã€‚</p>
                    <div class="formula">
                        mâ‚vâ‚ + mâ‚‚vâ‚‚ = mâ‚vâ‚' + mâ‚‚vâ‚‚'
                    </div>
                    <p><strong>ç‰©ç†æ„ä¹‰ï¼š</strong>ç¢°æ’å‰åç³»ç»Ÿçš„æ€»åŠ¨é‡ç›¸ç­‰ã€‚</p>
                </div>
                
                <div class="theory-section">
                    <h2>âš¡ èƒ½é‡å®ˆæ’å®šå¾‹</h2>
                    <p>èƒ½é‡ä¸ä¼šå‡­ç©ºäº§ç”Ÿæˆ–æ¶ˆå¤±ï¼Œåªä¼šä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼ã€‚</p>
                    <div class="formula">
                        Â½mâ‚vâ‚Â² + Â½mâ‚‚vâ‚‚Â² = Â½mâ‚vâ‚'Â² + Â½mâ‚‚vâ‚‚'Â² + Q
                    </div>
                    <p>Qä¸ºè½¬åŒ–ä¸ºå…¶ä»–å½¢å¼çš„èƒ½é‡ï¼ˆå¦‚çƒ­èƒ½ã€å£°èƒ½ç­‰ï¼‰ã€‚</p>
                </div>
                
                <div class="theory-section">
                    <h2>ğŸ”¬ ç¢°æ’ç±»å‹</h2>
                    <p><strong>å¼¹æ€§ç¢°æ’ï¼š</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 15px;">
                        <li>åŠ¨é‡å®ˆæ’</li>
                        <li>åŠ¨èƒ½å®ˆæ’</li>
                        <li>ç¢°æ’åç‰©ä½“åˆ†ç¦»</li>
                    </ul>
                    <p><strong>éå¼¹æ€§ç¢°æ’ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>åŠ¨é‡å®ˆæ’</li>
                        <li>åŠ¨èƒ½ä¸å®ˆæ’</li>
                        <li>éƒ¨åˆ†åŠ¨èƒ½è½¬åŒ–ä¸ºå†…èƒ½</li>
                    </ul>
                </div>
                
                <div class="theory-section">
                    <h2>ğŸ¯ å®éªŒæŒ‡å¯¼</h2>
                    <p>1. è°ƒæ•´å°çƒè´¨é‡å’Œé€Ÿåº¦å‚æ•°</p>
                    <p>2. é€‰æ‹©ä¸åŒç¢°æ’ç±»å‹è§‚å¯Ÿæ•ˆæœ</p>
                    <p>3. è®°å½•å’Œåˆ†æå®éªŒæ•°æ®</p>
                    <p>4. éªŒè¯ç‰©ç†å®ˆæ’å®šå¾‹</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è·å–Canvaså’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®Canvaså°ºå¯¸
        function resizeCanvas() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
        }
        
        // å°çƒç±»
        class Ball {
            constructor(x, y, radius, mass, velocity, color) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.mass = mass;
                this.velocity = velocity;
                this.color = color;
                this.originalColor = color;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // ç»˜åˆ¶é€Ÿåº¦ç®­å¤´
                if (Math.abs(this.velocity) > 0.1) {
                    const arrowLength = Math.abs(this.velocity) * 5;
                    const direction = this.velocity > 0 ? 1 : -1;
                    
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x + direction * arrowLength, this.y);
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // ç®­å¤´å¤´éƒ¨
                    ctx.beginPath();
                    ctx.moveTo(this.x + direction * arrowLength, this.y);
                    ctx.lineTo(this.x + direction * (arrowLength - 6), this.y - 3);
                    ctx.lineTo(this.x + direction * (arrowLength - 6), this.y + 3);
                    ctx.closePath();
                    ctx.fillStyle = 'white';
                    ctx.fill();
                }
            }
            
            update() {
                this.x += this.velocity;
            }
            
            // ç¢°æ’é—ªçƒæ•ˆæœ
            flash() {
                this.color = '#ffffff';
                setTimeout(() => {
                    this.color = this.originalColor;
                }, 100);
            }
        }
        
        // åˆå§‹åŒ–å˜é‡
        let ball1, ball2;
        let isElastic = true;
        
        function initBalls() {
            const mass1 = parseFloat(document.getElementById('mass1').value);
            const mass2 = parseFloat(document.getElementById('mass2').value);
            const velocity1 = parseFloat(document.getElementById('velocity1').value);
            const velocity2 = parseFloat(document.getElementById('velocity2').value);
            
            const centerY = canvas.height / 2;
            const radius1 = 15 + mass1 * 1.5;
            const radius2 = 15 + mass2 * 1.5;
            
            ball1 = new Ball(canvas.width * 0.3, centerY, radius1, mass1, velocity1, '#4a90e2');
            ball2 = new Ball(canvas.width * 0.7, centerY, radius2, mass2, velocity2, '#e74c3c');
        }
        
        // æ£€æµ‹ç¢°æ’
        function checkCollision() {
            const distance = Math.abs(ball1.x - ball2.x);
            const minDistance = ball1.radius + ball2.radius;
            
            if (distance <= minDistance) {
                // ç¢°æ’é—ªçƒæ•ˆæœ
                ball1.flash();
                ball2.flash();
                
                // è®¡ç®—ç¢°æ’åçš„é€Ÿåº¦
                if (isElastic) {
                    // å¼¹æ€§ç¢°æ’å…¬å¼
                    const v1 = ((ball1.mass - ball2.mass) * ball1.velocity + 2 * ball2.mass * ball2.velocity) / (ball1.mass + ball2.mass);
                    const v2 = ((ball2.mass - ball1.mass) * ball2.velocity + 2 * ball1.mass * ball1.velocity) / (ball1.mass + ball2.mass);
                    
                    ball1.velocity = v1;
                    ball2.velocity = v2;
                } else {
                    // éå¼¹æ€§ç¢°æ’å…¬å¼
                    const totalMomentum = ball1.mass * ball1.velocity + ball2.mass * ball2.velocity;
                    const totalMass = ball1.mass + ball2.mass;
                    const commonVelocity = totalMomentum / totalMass;
                    
                    // æŸå¤±15%çš„åŠ¨èƒ½
                    ball1.velocity = commonVelocity * 0.85;
                    ball2.velocity = commonVelocity * 0.85;
                }
                
                // é˜²æ­¢å°çƒé‡å 
                if (ball1.x < ball2.x) {
                    ball1.x = ball2.x - minDistance - 1;
                } else {
                    ball2.x = ball1.x - minDistance - 1;
                }
            }
        }
        
        // æ£€æŸ¥è¾¹ç•Œ
        function checkBoundaries() {
            // å°çƒ1è¾¹ç•Œæ£€æŸ¥
            if (ball1.x - ball1.radius < 0) {
                ball1.x = ball1.radius;
                ball1.velocity = Math.abs(ball1.velocity) * 0.9;
            } else if (ball1.x + ball1.radius > canvas.width) {
                ball1.x = canvas.width - ball1.radius;
                ball1.velocity = -Math.abs(ball1.velocity) * 0.9;
            }
            
            // å°çƒ2è¾¹ç•Œæ£€æŸ¥
            if (ball2.x - ball2.radius < 0) {
                ball2.x = ball2.radius;
                ball2.velocity = Math.abs(ball2.velocity) * 0.9;
            } else if (ball2.x + ball2.radius > canvas.width) {
                ball2.x = canvas.width - ball2.radius;
                ball2.velocity = -Math.abs(ball2.velocity) * 0.9;
            }
        }
        
        // æ›´æ–°æ•°æ®æ˜¾ç¤º
        function updateDataDisplay() {
            const momentum1 = ball1.mass * ball1.velocity;
            const momentum2 = ball2.mass * ball2.velocity;
            const totalMomentum = momentum1 + momentum2;
            
            const energy1 = 0.5 * ball1.mass * ball1.velocity * ball1.velocity;
            const energy2 = 0.5 * ball2.mass * ball2.velocity * ball2.velocity;
            const totalEnergy = energy1 + energy2;
            
            document.getElementById('totalMomentum').textContent = totalMomentum.toFixed(2) + ' kgÂ·m/s';
            document.getElementById('totalEnergy').textContent = totalEnergy.toFixed(2) + ' J';
            document.getElementById('ball1Velocity').textContent = ball1.velocity.toFixed(2) + ' m/s';
            document.getElementById('ball2Velocity').textContent = ball2.velocity.toFixed(2) + ' m/s';
        }
        
        // åŠ¨ç”»å¾ªç¯
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶ä¸­å¿ƒçº¿
            ctx.beginPath();
            ctx.moveTo(0, canvas.height / 2);
            ctx.lineTo(canvas.width, canvas.height / 2);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.stroke();
            
            // æ›´æ–°å’Œç»˜åˆ¶å°çƒ
            ball1.update();
            ball2.update();
            
            checkCollision();
            checkBoundaries();
            
            ball1.draw();
            ball2.draw();
            
            updateDataDisplay();
            
            requestAnimationFrame(animate);
        }
        
        // åˆå§‹åŒ–
        function init() {
            resizeCanvas();
            initBalls();
            animate();
        }
        
        // äº‹ä»¶ç›‘å¬
        document.getElementById('mass1').addEventListener('input', function() {
            document.getElementById('mass1Value').textContent = this.value + ' kg';
            initBalls();
        });
        
        document.getElementById('mass2').addEventListener('input', function() {
            document.getElementById('mass2Value').textContent = this.value + ' kg';
            initBalls();
        });
        
        document.getElementById('velocity1').addEventListener('input', function() {
            document.getElementById('velocity1Value').textContent = this.value + ' m/s';
            initBalls();
        });
        
        document.getElementById('velocity2').addEventListener('input', function() {
            document.getElementById('velocity2Value').textContent = this.value + ' m/s';
            initBalls();
        });
        
        document.getElementById('elasticBtn').addEventListener('click', function() {
            isElastic = true;
            document.getElementById('elasticBtn').classList.add('active');
            document.getElementById('inelasticBtn').classList.remove('active');
            initBalls();
        });
        
        document.getElementById('inelasticBtn').addEventListener('click', function() {
            isElastic = false;
            document.getElementById('inelasticBtn').classList.add('active');
            document.getElementById('elasticBtn').classList.remove('active');
            initBalls();
        });
        
        document.getElementById('resetBtn').addEventListener('click', init);
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è°ƒæ•´
        window.addEventListener('resize', init);
        
        // å¯åŠ¨æ¨¡æ‹Ÿ
        init();
    </script>
</body>
</html>
