<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨é‡ä¸èƒ½é‡å®ˆæ’åŸç†æ¼”ç¤º - å­¦ä¹ é€šä¸“ç”¨ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .simulation-area {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
        }
        
        .canvas-container {
            width: 100%;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
        }
        
        .control-group h3 {
            margin-bottom: 8px;
            font-size: 1rem;
            color: #ffcc00;
        }
        
        .slider-container {
            margin-bottom: 8px;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 4px;
            font-size: 0.9rem;
        }
        
        input[type="range"] {
            width: 100%;
            height: 6px;
        }
        
        .value-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            margin-top: 4px;
        }
        
        button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 2px;
            width: 100%;
        }
        
        button:hover {
            background: #3a7bc8;
        }
        
        .theory-area {
            flex: 1;
            min-width: 250px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
        }
        
        .theory-section {
            margin-bottom: 20px;
        }
        
        .theory-section h2 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: #ffcc00;
        }
        
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            text-align: center;
            font-size: 1rem;
        }
        
        .data-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .data-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .data-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffcc00;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 0.85rem;
        }
        
        .instructions h3 {
            margin-bottom: 8px;
            color: #ffcc00;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .simulation-area, .theory-area {
                min-width: 100%;
            }
            
            .data-display {
                grid-template-columns: 1fr;
            }
        }
        
        /* å­¦ä¹ é€šé€‚é…æ ·å¼ */
        .chaoxing-notice {
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #ff9900;
        }
        
        .chaoxing-notice h3 {
            color: #ff9900;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>åŠ¨é‡ä¸èƒ½é‡å®ˆæ’åŸç†æ¼”ç¤º</h1>
            <p class="subtitle">å°çƒç¢°æ’å®éªŒ - ç‰©ç†å®ˆæ’å®šå¾‹å¯è§†åŒ–æ•™å­¦</p>
        </header>
        
        <div class="chaoxing-notice">
            <h3>å­¦ä¹ é€šä½¿ç”¨è¯´æ˜</h3>
            <p>æ­¤é¡µé¢å·²é’ˆå¯¹å­¦ä¹ é€šç¯å¢ƒä¼˜åŒ–ï¼Œå­¦ç”Ÿç‚¹å‡»é“¾æ¥å³å¯ç›´æ¥æŸ¥çœ‹äº¤äº’åŠ¨ç”»ï¼Œæ— éœ€é¢å¤–å®‰è£…ä»»ä½•è½¯ä»¶ã€‚</p>
        </div>
        
        <div class="content">
            <div class="simulation-area">
                <div class="canvas-container">
                    <canvas id="simulationCanvas"></canvas>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h3>å°çƒ1å‚æ•°</h3>
                        <div class="slider-container">
                            <label for="mass1">è´¨é‡ (kg)</label>
                            <input type="range" id="mass1" min="1" max="10" value="2">
                            <div class="value-display">
                                <span>1</span>
                                <span id="mass1Value">2 kg</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <label for="velocity1">é€Ÿåº¦ (m/s)</label>
                            <input type="range" id="velocity1" min="0" max="10" value="5">
                            <div class="value-display">
                                <span>0</span>
                                <span id="velocity1Value">5 m/s</span>
                                <span>10</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h3>å°çƒ2å‚æ•°</h3>
                        <div class="slider-container">
                            <label for="mass2">è´¨é‡ (kg)</label>
                            <input type="range" id="mass2" min="1" max="10" value="4">
                            <div class="value-display">
                                <span>1</span>
                                <span id="mass2Value">4 kg</span>
                                <span>10</span>
                            </div>
                        </div>
                        <div class="slider-container">
                            <label for="velocity2">é€Ÿåº¦ (m/s)</label>
                            <input type="range" id="velocity2" min="-10" max="0" value="-3">
                            <div class="value-display">
                                <span>-10</span>
                                <span id="velocity2Value">-3 m/s</span>
                                <span>0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h3>ç¢°æ’æ§åˆ¶</h3>
                        <button id="elasticBtn" class="active">å¼¹æ€§ç¢°æ’</button>
                        <button id="inelasticBtn">éå¼¹æ€§ç¢°æ’</button>
                        <button id="resetBtn">é‡ç½®å®éªŒ</button>
                    </div>
                </div>
                
                <div class="data-display">
                    <div class="data-box">
                        <h3>æ€»åŠ¨é‡</h3>
                        <div class="data-value" id="totalMomentum">0 kgÂ·m/s</div>
                    </div>
                    <div class="data-box">
                        <h3>æ€»åŠ¨èƒ½</h3>
                        <div class="data-value" id="totalEnergy">0 J</div>
                    </div>
                    <div class="data-box">
                        <h3>å°çƒ1é€Ÿåº¦</h3>
                        <div class="data-value" id="ball1Velocity">0 m/s</div>
                    </div>
                    <div class="data-box">
                        <h3>å°çƒ2é€Ÿåº¦</h3>
                        <div class="data-value" id="ball2Velocity">0 m/s</div>
                    </div>
                </div>
                
                <div class="instructions">
                    <h3>å®éªŒæ“ä½œæŒ‡å—</h3>
                    <p>1. æ‹–åŠ¨æ»‘å—è°ƒæ•´å°çƒè´¨é‡å’Œé€Ÿåº¦</p>
                    <p>2. é€‰æ‹©ç¢°æ’ç±»å‹è§‚å¯Ÿä¸åŒæ•ˆæœ</p>
                    <p>3. å®æ—¶æŸ¥çœ‹åŠ¨é‡ä¸èƒ½é‡æ•°æ®å˜åŒ–</p>
                    <p>4. ç‚¹å‡»é‡ç½®æŒ‰é’®é‡æ–°å¼€å§‹å®éªŒ</p>
                </div>
            </div>
            
            <div class="theory-area">
                <div class="theory-section">
                    <h2>ğŸ“š åŠ¨é‡å®ˆæ’å®šå¾‹</h2>
                    <p>åœ¨ä¸€ä¸ªå°é—­ç³»ç»Ÿä¸­ï¼Œå¦‚æœæ²¡æœ‰å¤–åŠ›ä½œç”¨ï¼Œç³»ç»Ÿçš„æ€»åŠ¨é‡ä¿æŒä¸å˜ã€‚</p>
                    <div class="formula">
                        mâ‚vâ‚ + mâ‚‚vâ‚‚ = mâ‚vâ‚' + mâ‚‚vâ‚‚'
                    </div>
                    <p><strong>ç‰©ç†æ„ä¹‰ï¼š</strong>ç¢°æ’å‰åç³»ç»Ÿçš„æ€»åŠ¨é‡ç›¸ç­‰ã€‚</p>
                </div>
                
                <div class="theory-section">
                    <h2>âš¡ èƒ½é‡å®ˆæ’å®šå¾‹</h2>
                    <p>èƒ½é‡ä¸ä¼šå‡­ç©ºäº§ç”Ÿæˆ–æ¶ˆå¤±ï¼Œåªä¼šä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼ã€‚</p>
                    <div class="formula">
                        Â½mâ‚vâ‚Â² + Â½mâ‚‚vâ‚‚Â² = Â½mâ‚vâ‚'Â² + Â½mâ‚‚vâ‚‚'Â² + Q
                    </div>
                    <p>Qä¸ºè½¬åŒ–ä¸ºå…¶ä»–å½¢å¼çš„èƒ½é‡ï¼ˆå¦‚çƒ­èƒ½ã€å£°èƒ½ç­‰ï¼‰ã€‚</p>
                </div>
                
                <div class="theory-section">
                    <h2>ğŸ”¬ ç¢°æ’ç±»å‹</h2>
                    <p><strong>å¼¹æ€§ç¢°æ’ï¼š</strong></p>
                    <ul style="margin-left: 20px; margin-bottom: 10px;">
                        <li>åŠ¨é‡å®ˆæ’</li>
                        <li>åŠ¨èƒ½å®ˆæ’</li>
                        <li>ç¢°æ’åç‰©ä½“åˆ†ç¦»</li>
                    </ul>
                    <p><strong>éå¼¹æ€§ç¢°æ’ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>åŠ¨é‡å®ˆæ’</li>
                        <li>åŠ¨èƒ½ä¸å®ˆæ’</li>
                        <li>éƒ¨åˆ†åŠ¨èƒ½è½¬åŒ–ä¸ºå†…èƒ½</li>
                    </ul>
                </div>
                
                <div class="theory-section">
                    <h2>ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
                    <p>â€¢ ç†è§£åŠ¨é‡å®ˆæ’å®šå¾‹çš„ç‰©ç†æ„ä¹‰</p>
                    <p>â€¢ æŒæ¡èƒ½é‡å®ˆæ’åœ¨ä¸åŒç¢°æ’ä¸­çš„è¡¨ç°</p>
                    <p>â€¢ èƒ½å¤Ÿåˆ†æç¢°æ’è¿‡ç¨‹ä¸­çš„èƒ½é‡è½¬åŒ–</p>
                    <p>â€¢ åŸ¹å…»ç‰©ç†ç°è±¡çš„å¯è§†åŒ–ç†è§£èƒ½åŠ›</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è·å–Canvaså’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('simulationCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®Canvaså°ºå¯¸
        function resizeCanvas() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
        }
        
        // å°çƒç±»
        class Ball {
            constructor(x, y, radius, mass, velocity, color) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.mass = mass;
                this.velocity = velocity;
                this.color = color;
                this.originalColor = color;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // ç»˜åˆ¶é€Ÿåº¦ç®­å¤´
                if (Math.abs(this.velocity) > 0.1) {
                    const arrowLength = Math.abs(this.velocity) * 5;
                    const direction = this.velocity > 0 ? 1 : -1;
                    
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x + direction * arrowLength, this.y);
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // ç®­å¤´å¤´éƒ¨
                    ctx.beginPath();
                    ctx.moveTo(this.x + direction * arrowLength, this.y);
                    ctx.lineTo(this.x + direction * (arrowLength - 6), this.y - 3);
                    ctx.lineTo(this.x + direction * (arrowLength - 6), this.y + 3);
                    ctx.closePath();
                    ctx.fillStyle = 'white';
                    ctx.fill();
                }
            }
            
            update() {
                this.x += this.velocity;
            }
            
            // ç¢°æ’é—ªçƒæ•ˆæœ
            flash() {
                this.color = '#ffffff';
                setTimeout(() => {
                    this.color = this.originalColor;
                }, 100);
            }
        }
        
        // åˆå§‹åŒ–å˜é‡
        let ball1, ball2;
        let isElastic = true;
        let collisionCount = 0;
        
        function initBalls() {
            const mass1 = parseFloat(document.getElementById('mass1').value);
            const mass2 = parseFloat(document.getElementById('mass2').value);
            const velocity1 = parseFloat(document.getElementById('velocity1').value);
            const velocity2 = parseFloat(document.getElementById('velocity2').value);
            
            const centerY = canvas.height / 2;
            const radius1 = 15 + mass1 * 1.5;
            const radius2 = 15 + mass2 * 1.5;
            
            ball1 = new Ball(canvas.width * 0.3, centerY, radius1, mass1, velocity1, '#4a90e2');
            ball2 = new Ball(canvas.width * 0.7, centerY, radius2, mass2, velocity2, '#e74c3c');
            
            collisionCount = 0;
        }
        
        // æ£€æµ‹ç¢°æ’
        function checkCollision() {
            const distance = Math.abs(ball1.x - ball2.x);
            const minDistance = ball1.radius + ball2.radius;
            
            if (distance <= minDistance) {
                collisionCount++;
                
                // ç¢°æ’é—ªçƒæ•ˆæœ
                ball1.flash();
                ball2.flash();
                
                // è®¡ç®—ç¢°æ’åçš„é€Ÿåº¦
                if (isElastic) {
                    // å¼¹æ€§ç¢°æ’å…¬å¼
                    const v1 = ((ball1.mass - ball2.mass) * ball1.velocity + 2 * ball2.mass * ball2.velocity) / (ball1.mass + ball2.mass);
                    const v2 = ((ball2.mass - ball1.mass) * ball2.velocity + 2 * ball1.mass * ball1.velocity) / (ball1.mass + ball2.mass);
                    
                    ball1.velocity = v1;
                    ball2.velocity = v2;
                } else {
                    // éå¼¹æ€§ç¢°æ’å…¬å¼
                    const totalMomentum = ball1.mass * ball1.velocity + ball2.mass * ball2.velocity;
                    const totalMass = ball1.mass + ball2.mass;
                    const commonVelocity = totalMomentum / totalMass;
                    
                    // æŸå¤±15%çš„åŠ¨èƒ½
                    ball1.velocity = commonVelocity * 0.85;
                    ball2.velocity = commonVelocity * 0.85;
                }
                
                // é˜²æ­¢å°çƒé‡å 
                if (ball1.x < ball2.x) {
                    ball1.x = ball2.x - minDistance - 1;
                } else {
                    ball2.x = ball1.x - minDistance - 1;
                }
            }
        }
        
        // æ£€æŸ¥è¾¹ç•Œ
        function checkBoundaries() {
            // å°çƒ1è¾¹ç•Œæ£€æŸ¥
            if (ball1.x - ball1.radius < 0) {
                ball1.x = ball1.radius;
                ball1.velocity = Math.abs(ball1.velocity) * 0.9;
            } else if (ball1.x + ball1.radius > canvas.width) {
                ball1.x = canvas.width - ball1.radius;
                ball1.velocity = -Math.abs(ball1.velocity) * 0.9;
            }
            
            // å°çƒ2è¾¹ç•Œæ£€æŸ¥
            if (ball2.x - ball2.radius < 0) {
                ball2.x = ball2.radius;
                ball2.velocity = Math.abs(ball2.velocity) * 0.9;
            } else if (ball2.x + ball2.radius > canvas.width) {
                ball2.x = canvas.width - ball2.radius;
                ball2.velocity = -Math.abs(ball2.velocity) * 0.9;
            }
        }
        
        // æ›´æ–°æ•°æ®æ˜¾ç¤º
        function updateDataDisplay() {
            const momentum1 = ball1.mass * ball1.velocity;
            const momentum2 = ball2.mass * ball2.velocity;
            const totalMomentum = momentum1 + momentum2;
            
            const energy1 = 0.5 * ball1.mass * ball1.velocity * ball1.velocity;
            const energy2 = 0.5 * ball2.mass * ball2.velocity * ball2.velocity;
            const totalEnergy = energy1 + energy2;
            
            document.getElementById('totalMomentum').textContent = totalMomentum.toFixed(2) + ' kgÂ·m/s';
            document.getElementById('totalEnergy').textContent = totalEnergy.toFixed(2) + ' J';
            document.getElementById('ball1Velocity').textContent = ball1.velocity.toFixed(2) + ' m/s';
            document.getElementById('ball2Velocity').textContent = ball2.velocity.toFixed(2) + ' m/s';
        }
        
        // ç»˜åˆ¶ç½‘æ ¼èƒŒæ™¯
        function drawGrid() {
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            
            // å‚ç›´çº¿
            for (let x = 0; x <= canvas.width; x += 50) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // æ°´å¹³çº¿
            for (let y = 0; y <= canvas.height; y += 50) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
        }
        
        // åŠ¨ç”»å¾ªç¯
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶èƒŒæ™¯
            drawGrid();
            
            // ç»˜åˆ¶ä¸­å¿ƒçº¿
            ctx.beginPath();
            ctx.moveTo(0, canvas.height / 2);
            ctx.lineTo(canvas.width, canvas.height / 2);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.stroke();
            
            // æ›´æ–°å’Œç»˜åˆ¶å°çƒ
            ball1.update();
            ball2.update();
            
            checkCollision();
            checkBoundaries();
            
            ball1.draw();
            ball2.draw();
            
            updateDataDisplay();
            
            requestAnimationFrame(animate);
        }
        
        // åˆå§‹åŒ–
        function init() {
            resizeCanvas();
            initBalls();
            animate();
        }
        
        // äº‹ä»¶ç›‘å¬
        document.getElementById('mass1').addEventListener('input', function() {
            document.getElementById('mass1Value').textContent = this.value + ' kg';
            initBalls();
        });
        
        document.getElementById('mass2').addEventListener('input', function() {
            document.getElementById('mass2Value').textContent = this.value + ' kg';
            initBalls();
        });
        
        document.getElementById('velocity1').addEventListener('input', function() {
            document.getElementById('velocity1Value').textContent = this.value + ' m/s';
            initBalls();
        });
        
        document.getElementById('velocity2').addEventListener('input', function() {
            document.getElementById('velocity2Value').textContent = this.value + ' m/s';
            initBalls();
        });
        
        document.getElementById('elasticBtn').addEventListener('click', function() {
            isElastic = true;
            document.getElementById('elasticBtn').classList.add('active');
            document.getElementById('inelasticBtn').classList.remove('active');
            initBalls();
        });
        
        document.getElementById('inelasticBtn').addEventListener('click', function() {
            isElastic = false;
            document.getElementById('inelasticBtn').classList.add('active');
            document.getElementById('elasticBtn').classList.remove('active');
            initBalls();
        });
        
        document.getElementById('resetBtn').addEventListener('click', init);
        
        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°è°ƒæ•´
        window.addEventListener('resize', init);
        
        // å¯åŠ¨æ¨¡æ‹Ÿ
        init();
    </script>
</body>
</html>